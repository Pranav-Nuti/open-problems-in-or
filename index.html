<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Open Problems in Operations Research</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="site-header">
    <h1 class="site-title"><a href="index.html">Open Problems in Operations Research</a></h1>
  </header>

  <main>
    <div class="wip-warning" role="alert" style="background-color: #fef08a; border: 2px solid #f59e0b; color: #92400e; padding: 1rem 1.5rem; border-radius: 8px;">
      <strong>Work in progress.</strong> This site is under active development. Content may be incomplete, placeholder, or subject to change.
    </div>
    <ul class="problem-list" id="problem-list">
      <!-- Populated by JavaScript -->
    </ul>

    <nav class="pagination" id="pagination" aria-label="Problem list pagination">
      <!-- Populated by JavaScript -->
    </nav>
  </main>

  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-maintainers">Maintainers: Eric Fithian, Rad Niazadeh, Pranav Nuti</div>
      <div>Open Problems in Operations Research</div>
    </div>
  </footer>

  <script>
    const PROBLEMS_DATA = [
      { id: 1, name: "Polynomial-Time Algorithm for Stochastic Queueing Networks", author: "J. Michael Harrison" },
      { id: 2, name: "Tight Bounds for Online Bipartite Matching", author: "Vahab Mirrokni, Rad Niazadeh" },
      { id: 3, name: "Computational Complexity of Multi-Stage Stochastic Programming", author: "Andy Philpott, Alexander Shapiro" },
      { id: 4, name: "Approximation Algorithms for the Traveling Salesman Problem with Time Windows", author: "David Williamson" },
      { id: 5, name: "Convex Relaxation Tightness for Mixed-Integer Programming", author: "Sanjeeb Dash, Oktay Günlük" },
      { id: 6, name: "Sample Complexity of Reinforcement Learning in Continuous Action Spaces", author: "John Schulman, Pieter Abbeel" }
    ];
    const PROBLEMS_PER_PAGE = 3;
    const totalPages = Math.ceil(PROBLEMS_DATA.length / PROBLEMS_PER_PAGE);

    function getCurrentPage() {
      const params = new URLSearchParams(window.location.search);
      const page = parseInt(params.get('page') || '1', 10);
      return Math.min(Math.max(1, page), totalPages);
    }

    function renderProblems() {
      const currentPage = getCurrentPage();
      const start = (currentPage - 1) * PROBLEMS_PER_PAGE;
      const end = Math.min(start + PROBLEMS_PER_PAGE, PROBLEMS_DATA.length);
      const pageProblems = PROBLEMS_DATA.slice(start, end);

      const listEl = document.getElementById('problem-list');
      listEl.innerHTML = pageProblems.map(p => `
        <li class="problem-card">
          <a href="problems/${String(p.id).padStart(3, '0')}.html" class="problem-card-link">
            <div class="problem-card-id">Problem #${p.id}</div>
            <h2 class="problem-card-title">${escapeHtml(p.name)}</h2>
            <div class="problem-card-meta">
              <span>Author: ${escapeHtml(p.author)}</span>
            </div>
          </a>
        </li>
      `).join('');

      renderPagination(currentPage);
    }

    function renderPagination(currentPage) {
      const navEl = document.getElementById('pagination');
      let html = '';

      html += `<a href="?page=${currentPage - 1}" class="${currentPage === 1 ? 'disabled' : ''}" ${currentPage === 1 ? 'aria-disabled="true"' : ''}>Previous</a>`;

      for (let i = 1; i <= totalPages; i++) {
        const activeClass = i === currentPage ? 'current' : '';
        html += `<a href="?page=${i}" class="${activeClass}">${i}</a>`;
      }

      html += `<a href="?page=${currentPage + 1}" class="${currentPage === totalPages ? 'disabled' : ''}" ${currentPage === totalPages ? 'aria-disabled="true"' : ''}>Next</a>`;

      navEl.innerHTML = html;
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    renderProblems();
  </script>
</body>
</html>
